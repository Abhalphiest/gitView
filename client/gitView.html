<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Git Viewer</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script>
	(function(){
		const GITVIEW_URL = 'https://git-viewer.herokuapp.com';
		const GITVIEW_TEST_URL = "http://localhost:3000/";
		window.onload = init;
		
		function init(){
			// set up username search
			document.querySelector("#username").onchange = function(){
				queryUsername(this.value);
			};

			// also use enter key

			// also use submit button..?

		}
		
		function queryUsername(username){
			// get list of repositories
			var repolist
			console.log("querying username "+ username);
			//populate repositories
			var reposelect = document.querySelector("#repositories");

			var xhttp = new XMLHttpRequest();
			xhttp.onreadystatechange = function(){
				if(this.readyState == 4 && this.status == 200){
					console.dir(this.responseText);
					var repos = JSON.parse(this.responseText);
					repos.forEach(function(repo){
						var li = document.createElement('li');
						li.innerText = repo;
						reposelect.appendChild(li);
					});
				}
			};
			xhttp.open("GET", GITVIEW_TEST_URL + "user/repos?username="+username);
			console.log(GITVIEW_TEST_URL + "user/repos?username="+username);
			xhttp.send();

		}
		
	
	}())
	</script>
</head>
<body>

<label for="username">GitHub Username: </label> <input type="text" id="username">
<!-- Custom select -->
<label for="repositories">Repository: </label> <ul id="repositories"> </ul>
<label for="layout"> Layout: </label> 	<ul id="layout"> 
											<li> 1 </li>
											<li> 2 </li>
											<li> 3 </li>
											<li> 4 </li>
											<li> 5 </li>
											<li> 6 </li>
											<li> 7 </li>
											<li> 8 </li>
											<li> 9 </li>
										</ul>
	
<div id="preview"> </div>

<ul id="dropdown"></ul>
</body>
</html>
